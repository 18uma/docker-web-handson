# コンテナ学習教材 設計書（初心者向け・改訂版）

## 1. 目的

本教材は、**Docker完全初心者〜業務でDockerに少し触れる人**を対象に、
Docker / Docker Compose を用いたローカル開発環境構築の基礎を学ぶことを目的とする。

アプリケーションの実装や内部ロジックは学習対象外とし、
**「用意されたWebアプリケーションをDockerで動かせるようになること」**をゴールとする。

---

## 2. 想定読者

* Dockerを使ったことがない、または雰囲気で使っている人
* `docker compose up` を実行したことはあるが、仕組みを説明できない人
* Webアプリケーションの構成（フロント / バック / DB）は何となく理解している人
* Node.js / React / TypeScript の詳細な知識は不要

---

## 3. 学習ゴール

本教材を修了すると、以下ができるようになる。

* Docker / Docker Compose を使ってローカル開発環境を構築できる
* 複数コンテナ（フロントエンド・バックエンド・DB）を連携させて起動できる
* Dockerfile と docker-compose.yml の役割を説明できる
* コンテナとホスト環境の違いを理解して説明できる
* 「なぜDockerを使うのか」を自分の言葉で説明できる

---

## 4. 学習対象範囲（スコープ）

### 扱う内容（初心者向け）

* Docker の基本概念
* Dockerfile（単一ステージ）
* Docker Compose の基本構文
* ポートフォワーディング
* ボリュームによるデータ永続化
* 環境変数（最低限）

### 扱わない内容

* multi-stage build
* 本番環境向け最適化
* Kubernetes
* CI/CD
* アプリケーション内部設計・実装

---

## 5. 教材で扱うシステム構成

### 全体構成

```
[ Browser ]
     ↓
[ Frontend (React + TypeScript) ]
     ↓
[ Backend (Node.js + Express) ]
     ↓
[ Database (MySQL) ]
```

### 技術スタック

* フロントエンド

  * React + TypeScript
* バックエンド

  * Node.js + Express
* データベース

  * MySQL
* コンテナ管理

  * Docker
  * Docker Compose

### MySQLを採用する理由

* 初学者にとって名前や用途が馴染みやすい
* 設定項目が比較的少なく、学習コストが低い
* 「DBコンテナ＋永続化」というDocker学習目的を満たすのに十分

---

## 6. 教材の進め方（ストーリーライン）

本教材は、以下の流れで学習を進める。

1. Dockerとは何か、なぜ使うのかを理解する
2. Node.jsバックエンドをDockerコンテナで起動する
3. Docker Composeを使って構成を整理する
4. フロントエンドとDBを含めた構成に拡張する
5. データ永続化を確認し、Dockerの価値を体感する

**「環境構築が完了し、アプリが動作する」ことを成功体験として設計する。**

---

## 7. リポジトリ構成・ブランチ戦略

### ブランチ構成

* `main`

  * 教材の完成版
  * 全サービスが起動する状態
* `exercise/step-1`
* `exercise/step-2`
* `exercise/step-3`

各ステップは課題形式とし、段階的に完成形へ近づける。

---

## 8. ステップ構成と学習ポイント

### Step 0：事前知識（読むだけ）

* Dockerとは何か
* コンテナとホスト環境の違い
* 今回構築するシステムの全体像

---

### Step 1：バックエンドをDockerで動かす

**内容**

* Node.js用のDockerfileを作成する
* `docker build` / `docker run` を使って起動する
* ブラウザからアクセスできることを確認する

**よくある失敗・Tips**

* ポートを公開していないためアクセスできない
  → コンテナとホストは別物であることを理解する
* `node_modules` が見つからず起動に失敗する
  → Dockerfileの実行順序（COPY / RUN）を意識する

---

### Step 2：Docker Composeを使う

**内容**

* docker-compose.yml を作成する
* フロントエンドとバックエンドを同時に起動する
* ポート設定を整理する

**よくある失敗・Tips**

* サービス名と接続先ホストを混同する
  → `localhost` と コンテナ名の違いを理解する
* `docker run` との違いが分からなくなる
  → 「複数コンテナ管理」の役割を整理する

---

### Step 3：データベースを追加する

**内容**

* MySQLコンテナを追加する
* ボリュームを設定してデータを永続化する
* 再起動後もデータが残ることを確認する

**よくある失敗・Tips**

* DBが起動する前にアプリが接続して失敗する
  → `depends_on` の役割を理解する
* 再起動でデータが消える
  → ボリューム未設定による問題を体感する

---

## 9. ドキュメント構成方針

* 教材全体の説明は `README.md` に記載する
* 各ステップごとに個別のMarkdownファイルを用意する
* 各ステップには以下を含める

  * 課題内容
  * ヒント（コメントアウト）
  * よくある失敗とその理由（Tips）

---

## 10. 設計方針まとめ

* 初心者が「Dockerで動かせた」という成功体験を得ることを最優先する
* 失敗しやすいポイントを意図的に拾い、理解を深める構成とする
* 実装方法を縛らず、「動けばOK」という課題設計とする
* 業務でのDocker利用を想定した、実務に近い構成を採用する
