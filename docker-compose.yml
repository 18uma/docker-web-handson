version: '3.8'

services:
  # フロントエンド (React)
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    depends_on:
      - backend
    stdin_open: true
    tty: true

  # バックエンド (Node.js + Express)
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    # TODO: データベース接続用の環境変数を追加してください
    # ヒント: environment:
    #   - DB_HOST=database
    #   - DB_USER=root
    #   - DB_PASSWORD=password
    #   - DB_NAME=taskdb
    #   - DB_PORT=3306
    # ヒント: depends_on:
    #   - database

  # TODO: データベース (MySQL) を追加してください
  # ヒント: database:
  #   image: mysql:8.0
  #   ports:
  #     - "3306:3306"
  #   environment:
  #     - MYSQL_ROOT_PASSWORD=password
  #     - MYSQL_DATABASE=taskdb
  #   volumes:
  #     - mysql_data:/var/lib/mysql
  #     - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql
  #   command: --default-authentication-plugin=mysql_native_password --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci

# TODO: ボリュームを定義してください
# ヒント: volumes:
#   mysql_data: